[
    {
        "UpdateStageName": "Install Required Packages",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c 'apt-get update && apt-get install -y git npm nodejs'",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Create Server Directory",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "CreateDirectory",
        "UpdateSourceArgs": "{{ $FullBaseDir }}server"
    },
    {
        "UpdateStageName": "Create Data Directory",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "CreateDirectory",
        "UpdateSourceArgs": "{{ $FullBaseDir }}data"
    },
    {
        "UpdateStageName": "Clone Uptime Kuma Repository",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd '{{ $FullBaseDir }}server' && git clone https://github.com/louislam/uptime-kuma.git .\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Check for Existing Repository",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd '{{ $FullBaseDir }}server' && [ -d .git ] && git pull || exit 0\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Install Uptime Kuma",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd '{{ $FullBaseDir }}server' && npm install\"",
        "SkipOnFailure": false
    },
    {
        "UpdateStageName": "Initialize Uptime Kuma",
        "UpdateSourcePlatform": "Linux",
        "UpdateSource": "Executable",
        "UpdateSourceData": "/bin/bash",
        "UpdateSourceArgs": "-c \"cd '{{ $FullBaseDir }}server' && npm run setup\"",
        "SkipOnFailure": false
    }
]
